<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="529px" preserveAspectRatio="none" style="width:885px;height:529px;background:#FFFFFF;" version="1.1" viewBox="0 0 885 529" width="885px" zoomAndPan="magnify"><title>Leader &#8212; Multi-signal Scaling (CPU + latency/errors/queue)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="469.8955" x="209.479" y="27.9951">Leader &#8212; Multi-signal Scaling (CPU + latency/errors/queue)</text><rect fill="none" height="386.6797" style="stroke:#000000;stroke-width:1.5;" width="869.8535" x="10" y="90.5938"/><rect fill="none" height="255.1484" style="stroke:#000000;stroke-width:1.5;" width="849.8535" x="20" y="215.125"/><rect fill="none" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="829.8535" x="30" y="239.2578"/><rect fill="none" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="829.8535" x="30" y="358.2656"/><g><title>Auto-Agent .Leader.</title><rect fill="#000000" fill-opacity="0.00000" height="420.6797" width="8" x="114.3091" y="73.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="118" x2="118" y1="73.5938" y2="494.2734"/></g><g><title>Prometheus</title><rect fill="#000000" fill-opacity="0.00000" height="420.6797" width="8" x="536.3618" y="73.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="540.2832" x2="540.2832" y1="73.5938" y2="494.2734"/></g><g><title>K8s API Server</title><rect fill="#000000" fill-opacity="0.00000" height="420.6797" width="8" x="653.6108" y="73.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="657.4404" x2="657.4404" y1="73.5938" y2="494.2734"/></g><g><title>GitOps Provider</title><rect fill="#000000" fill-opacity="0.00000" height="420.6797" width="8" x="783.8174" y="73.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="787.7813" x2="787.7813" y1="73.5938" y2="494.2734"/></g><g class="participant participant-head" data-participant="Leader"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="156.6182" x="40" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142.6182" x="47" y="62.292">Auto-Agent (Leader)</text></g><g class="participant participant-tail" data-participant="Leader"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="156.6182" x="40" y="493.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142.6182" x="47" y="513.2686">Auto-Agent (Leader)</text></g><g class="participant participant-head" data-participant="Prom"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98.1572" x="491.2832" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.1572" x="498.2832" y="62.292">Prometheus</text></g><g class="participant participant-tail" data-participant="Prom"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98.1572" x="491.2832" y="493.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.1572" x="498.2832" y="513.2686">Prometheus</text></g><g class="participant participant-head" data-participant="API"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116.3408" x="599.4404" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102.3408" x="606.4404" y="62.292">K8s API Server</text></g><g class="participant participant-tail" data-participant="API"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116.3408" x="599.4404" y="493.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102.3408" x="606.4404" y="513.2686">K8s API Server</text></g><g class="participant participant-head" data-participant="GitOps"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124.0723" x="725.7813" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.0723" x="732.7813" y="62.292">GitOps Provider</text></g><g class="participant participant-tail" data-participant="GitOps"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124.0723" x="725.7813" y="493.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.0723" x="732.7813" y="513.2686">GitOps Provider</text></g><path d="M10,90.5938 L86.624,90.5938 L86.624,97.7266 L76.624,107.7266 L10,107.7266 L10,90.5938" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="386.6797" style="stroke:#000000;stroke-width:1.5;" width="869.8535" x="10" y="90.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="25" y="103.6606">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="174.0933" x="101.624" y="102.8042">[every 30s (leader-elected)]</text><g class="message" data-participant-1="Leader" data-participant-2="Prom"><polygon fill="#181818" points="528.3618,124.8594,538.3618,128.8594,528.3618,132.8594,532.3618,128.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="118.3091" x2="534.3618" y1="128.8594" y2="128.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.5806" x="125.3091" y="123.7935">Query CPU avg(window)</text></g><g class="message" data-participant-1="Leader" data-participant-2="Prom"><polygon fill="#181818" points="528.3618,153.9922,538.3618,157.9922,528.3618,161.9922,532.3618,157.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="118.3091" x2="534.3618" y1="157.9922" y2="157.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="290.8306" x="125.3091" y="152.9263">Query p95 latency / error rate / queue depth</text></g><g class="message" data-participant-1="Leader" data-participant-2="Leader"><line style="stroke:#181818;stroke-width:1;" x1="118.3091" x2="160.3091" y1="187.125" y2="187.125"/><line style="stroke:#181818;stroke-width:1;" x1="160.3091" x2="160.3091" y1="187.125" y2="200.125"/><line style="stroke:#181818;stroke-width:1;" x1="119.3091" x2="160.3091" y1="200.125" y2="200.125"/><polygon fill="#181818" points="129.3091,196.125,119.3091,200.125,129.3091,204.125,125.3091,200.125" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="408.0527" x="125.3091" y="182.0591">Check sustained breach + cooldowns + min/max + HPA guard</text></g><path d="M20,215.125 L84.4429,215.125 L84.4429,222.2578 L74.4429,232.2578 L20,232.2578 L20,215.125" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="255.1484" style="stroke:#000000;stroke-width:1.5;" width="849.8535" x="20" y="215.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="35" y="228.1919">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="219.248" x="99.4429" y="227.3354">[Scale Up (CPU&gt;thr AND any gate)]</text><path d="M30,239.2578 L94.4429,239.2578 L94.4429,246.3906 L84.4429,256.3906 L30,256.3906 L30,239.2578" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="829.8535" x="30" y="239.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="45" y="252.3247">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="123.4761" x="109.4429" y="251.4683">[GitOps mode = PR]</text><g class="message" data-participant-1="Leader" data-participant-2="GitOps"><polygon fill="#181818" points="775.8174,273.5234,785.8174,277.5234,775.8174,281.5234,779.8174,277.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="118.3091" x2="781.8174" y1="277.5234" y2="277.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109.0146" x="125.3091" y="272.4575">Open PR (+step)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="30" x2="859.8535" y1="286.5234" y2="286.5234"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="70.9629" x="35" y="296.7339">[live patch]</text><g class="message" data-participant-1="Leader" data-participant-2="API"><polygon fill="#181818" points="645.6108,317.4609,655.6108,321.4609,645.6108,325.4609,649.6108,321.4609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="118.3091" x2="651.6108" y1="321.4609" y2="321.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.4155" x="125.3091" y="316.395">Patch replicas (+step)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="20" x2="869.8535" y1="337.4609" y2="337.4609"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="369.4614" x="25" y="347.6714">[Scale Down (CPU&lt;0.30 AND no gates AND long cooldown)]</text><path d="M30,358.2656 L94.4429,358.2656 L94.4429,365.3984 L84.4429,375.3984 L30,375.3984 L30,358.2656" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="829.8535" x="30" y="358.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="45" y="371.3325">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="123.4761" x="109.4429" y="370.4761">[GitOps mode = PR]</text><g class="message" data-participant-1="Leader" data-participant-2="GitOps"><polygon fill="#181818" points="775.8174,392.5313,785.8174,396.5313,775.8174,400.5313,779.8174,396.5313" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="118.3091" x2="781.8174" y1="396.5313" y2="396.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.813" x="125.3091" y="391.4653">Open PR (-step)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="30" x2="859.8535" y1="405.5313" y2="405.5313"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="70.9629" x="35" y="415.7417">[live patch]</text><g class="message" data-participant-1="Leader" data-participant-2="API"><polygon fill="#181818" points="645.6108,436.4688,655.6108,440.4688,645.6108,444.4688,649.6108,440.4688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="118.3091" x2="651.6108" y1="440.4688" y2="440.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.2139" x="125.3091" y="435.4028">Patch replicas (-step)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="20" x2="869.8535" y1="456.4688" y2="456.4688"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="75.5874" x="25" y="466.6792">[No change]</text><!--SRC=[fLB1RjGm4BtdAvvwogeAkrA512ke5BKI8A0DhVe1WpCaLXtRsCx2tlW8lf0lOU9a9I8GbnuipTXlthnvu_YehQT00s9FhVkcROSlP28NIIV3-C3KSi2l7p_nSJH9Lr5tbWpk5Pa9Mrur3pY7eSHM7RSSWWjn-tNaaJT58Sn9A-t99fpLOt9LtR74vKoxEGF5fSKQsmGtSEfvZ1aofMl0-nSHTVCEznmE7398qZNcZKwtFXSVTBk0vhkYCCvvi9GUSR6BA4qMKR5XbRZT53XDNbtcxjZZqpYXftdfq9NYbDZr7w1_-Vna2xR8nY18Bacs1otxrA_gbsYFgvxL8-8O4sdBBJu79jMBpyev8srjb7ZGTZlGTudUDZMwaK8hR6HINWxZmUVjNAO-eBwv1jaZEX4mQPvnYq63QnclqTpbXpy5BO0zRZrR0Q0yZudzpC3oIs3qWU4fgVwlucazUpJJ6m9xevNuloAma-1CCok-bicovbUxPnUxBDgwh3dcn3ZvSISBdZH6zTGngd-ESUEWUh8T5_ErdDy0]--></g></svg>